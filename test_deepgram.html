<!DOCTYPE html>
<html>
<head>
    <title>Test Deepgram Direct</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 10px 0;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            min-height: 100px;
        }
    </style>
</head>
<body>
    <h1>Test Deepgram Direct Connection</h1>
    <button id="testButton">Test Deepgram Direct Streaming</button>
    <div id="result">Results will appear here...</div>

    <script>
        // For Tauri apps
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're running in a Tauri app
            const isTauri = window.__TAURI__ !== undefined;
            
            if (isTauri) {
                document.getElementById('testButton').addEventListener('click', async function() {
                    const resultDiv = document.getElementById('result');
                    resultDiv.innerHTML = "Testing Deepgram direct streaming...";
                    
                    try {
                        // Call the Tauri command
                        const result = await window.__TAURI__.invoke('test_deepgram_streaming_direct');
                        resultDiv.innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
                    } catch (error) {
                        resultDiv.innerHTML = `Error: ${error.message || error}`;
                    }
                });
            } else {
                document.getElementById('result').innerHTML = "Not running in Tauri context";
            }
        });
    </script>
</body>
</html>